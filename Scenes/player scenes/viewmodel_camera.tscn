[gd_scene load_steps=47 format=3 uid="uid://crm0oehiwfse0"]

[ext_resource type="Script" uid="uid://caths748dbcbb" path="res://Scripts/PlayerCharacter/QuakelikeController/viewmodel.gd" id="1_yv3jn"]
[ext_resource type="Curve" uid="uid://vahpdtrhcd6d" path="res://Scripts/PlayerCharacter/QuakelikeController/grappleCurve.tres" id="2_monst"]
[ext_resource type="PackedScene" uid="uid://bytpsgy5tks2o" path="res://assets/arm_rig/ArmRig.glb" id="3_thyv6"]
[ext_resource type="Shader" uid="uid://da660fif3n7uf" path="res://assets/arm_rig/my_toon_shader.gdshader" id="4_788iy"]
[ext_resource type="Texture2D" uid="uid://brl44lijoor0h" path="res://assets/arm_rig/ArmRig_DefaultMaterial_Base_color.png" id="5_yfcuc"]

[sub_resource type="Gradient" id="Gradient_svflv"]
offsets = PackedFloat32Array(0.54121864, 0.54480284)
colors = PackedColorArray(0.103743516, 0.10374353, 0.103743516, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_a75n1"]
gradient = SubResource("Gradient_svflv")

[sub_resource type="Gradient" id="Gradient_bbnd0"]
offsets = PackedFloat32Array(0.5519713, 0.72759855)
colors = PackedColorArray(0.101960786, 0.101960786, 0.101960786, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_lxvi3"]
gradient = SubResource("Gradient_bbnd0")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_k80qd"]
render_priority = 0
shader = ExtResource("4_788iy")
shader_parameter/main_texture = ExtResource("5_yfcuc")
shader_parameter/color_gradient = SubResource("GradientTexture1D_a75n1")
shader_parameter/fresnel_gradient = SubResource("GradientTexture1D_lxvi3")

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_thyv6"]
animation = &"idle2"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qqqq8"]
xfade_time = 0.3
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_788iy"]
states/idle/node = SubResource("AnimationNodeAnimation_thyv6")
states/idle/position = Vector2(320, 100)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_qqqq8")]
graph_offset = Vector2(-106, -8)

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_yfcuc"]
filter_enabled = true
filters = ["rig/Skeleton3D:DEF-f_index.01.L", "rig/Skeleton3D:DEF-f_index.02.L", "rig/Skeleton3D:DEF-f_index.03.L", "rig/Skeleton3D:DEF-f_middle.01.L", "rig/Skeleton3D:DEF-f_middle.02.L", "rig/Skeleton3D:DEF-f_middle.03.L", "rig/Skeleton3D:DEF-f_pinky.01.L", "rig/Skeleton3D:DEF-f_pinky.02.L", "rig/Skeleton3D:DEF-f_pinky.03.L", "rig/Skeleton3D:DEF-f_ring.01.L", "rig/Skeleton3D:DEF-f_ring.02.L", "rig/Skeleton3D:DEF-f_ring.03.L", "rig/Skeleton3D:DEF-forearm.L", "rig/Skeleton3D:DEF-forearm.L.001", "rig/Skeleton3D:DEF-hand.L", "rig/Skeleton3D:DEF-thumb.01.L", "rig/Skeleton3D:DEF-thumb.02.L", "rig/Skeleton3D:DEF-thumb.03.L", "rig/Skeleton3D:DEF-upper_arm.L", "rig/Skeleton3D:DEF-upper_arm.L.001"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_svflv"]
filter_enabled = true
filters = ["rig/Skeleton3D:DEF-f_index.01.R", "rig/Skeleton3D:DEF-f_index.02.R", "rig/Skeleton3D:DEF-f_index.03.R", "rig/Skeleton3D:DEF-f_middle.01.R", "rig/Skeleton3D:DEF-f_middle.02.R", "rig/Skeleton3D:DEF-f_middle.03.R", "rig/Skeleton3D:DEF-f_pinky.01.R", "rig/Skeleton3D:DEF-f_pinky.02.R", "rig/Skeleton3D:DEF-f_pinky.03.R", "rig/Skeleton3D:DEF-f_ring.01.R", "rig/Skeleton3D:DEF-f_ring.02.R", "rig/Skeleton3D:DEF-f_ring.03.R", "rig/Skeleton3D:DEF-forearm.R", "rig/Skeleton3D:DEF-forearm.R.001", "rig/Skeleton3D:DEF-hand.R", "rig/Skeleton3D:DEF-palm.01.R", "rig/Skeleton3D:DEF-palm.02.R", "rig/Skeleton3D:DEF-palm.03.R", "rig/Skeleton3D:DEF-palm.04.R", "rig/Skeleton3D:DEF-thumb.01.R", "rig/Skeleton3D:DEF-thumb.02.R", "rig/Skeleton3D:DEF-thumb.03.R", "rig/Skeleton3D:DEF-upper_arm.R", "rig/Skeleton3D:DEF-upper_arm.R.001"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a75n1"]
animation = &"dash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_svflv"]
animation = &"hook_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_788iy"]
animation = &"hook_release"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yfcuc"]
animation = &"hook_throw"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qqqq8"]
animation = &"idle2"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_788iy"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a75n1"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bbnd0"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_svflv"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_iwujp"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lxvi3"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bnju3"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_lxvi3"]
states/dash/node = SubResource("AnimationNodeAnimation_a75n1")
states/dash/position = Vector2(443, 179)
states/hook_idle/node = SubResource("AnimationNodeAnimation_svflv")
states/hook_idle/position = Vector2(511, -13)
states/hook_release/node = SubResource("AnimationNodeAnimation_788iy")
states/hook_release/position = Vector2(443, 54)
states/hook_throw/node = SubResource("AnimationNodeAnimation_yfcuc")
states/hook_throw/position = Vector2(388, -58)
states/idle/node = SubResource("AnimationNodeAnimation_qqqq8")
states/idle/position = Vector2(303, 100)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_788iy"), "idle", "dash", SubResource("AnimationNodeStateMachineTransition_a75n1"), "dash", "idle", SubResource("AnimationNodeStateMachineTransition_bbnd0"), "idle", "hook_throw", SubResource("AnimationNodeStateMachineTransition_svflv"), "hook_release", "idle", SubResource("AnimationNodeStateMachineTransition_iwujp"), "hook_throw", "hook_idle", SubResource("AnimationNodeStateMachineTransition_lxvi3"), "hook_idle", "hook_release", SubResource("AnimationNodeStateMachineTransition_bnju3")]
graph_offset = Vector2(-82, -75)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bbnd0"]
animation = &"fire_hold"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_k80qd"]
animation = &"fire_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_e7ho3"]
animation = &"fire_release"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lxvi3"]
animation = &"idle2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ir7kh"]
animation = &"lightning_hold"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_iwujp"]
animation = &"lightning_idle2"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bnju3"]
animation = &"lightning_release"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k80qd"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ir7kh"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kj8uk"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5fm3q"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8vgjs"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_u3aud"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5ed3i"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3l4xx"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_p387l"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_e7ho3"]
states/fire_hold/node = SubResource("AnimationNodeAnimation_bbnd0")
states/fire_hold/position = Vector2(418, -121)
states/fire_idle/node = SubResource("AnimationNodeAnimation_k80qd")
states/fire_idle/position = Vector2(418, -37)
states/fire_release/node = SubResource("AnimationNodeAnimation_e7ho3")
states/fire_release/position = Vector2(418, 31)
states/idle/node = SubResource("AnimationNodeAnimation_lxvi3")
states/idle/position = Vector2(295, 100)
states/lightning_hold/node = SubResource("AnimationNodeAnimation_ir7kh")
states/lightning_hold/position = Vector2(418, 163)
states/lightning_idle/node = SubResource("AnimationNodeAnimation_iwujp")
states/lightning_idle/position = Vector2(418, 228)
states/lightning_release/node = SubResource("AnimationNodeAnimation_bnju3")
states/lightning_release/position = Vector2(418, 296)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_k80qd"), "idle", "fire_hold", SubResource("AnimationNodeStateMachineTransition_ir7kh"), "fire_hold", "fire_idle", SubResource("AnimationNodeStateMachineTransition_kj8uk"), "fire_idle", "fire_release", SubResource("AnimationNodeStateMachineTransition_5fm3q"), "fire_release", "idle", SubResource("AnimationNodeStateMachineTransition_8vgjs"), "idle", "lightning_hold", SubResource("AnimationNodeStateMachineTransition_u3aud"), "lightning_hold", "lightning_idle", SubResource("AnimationNodeStateMachineTransition_5ed3i"), "lightning_idle", "lightning_release", SubResource("AnimationNodeStateMachineTransition_3l4xx"), "lightning_release", "idle", SubResource("AnimationNodeStateMachineTransition_p387l")]
graph_offset = Vector2(-170, 44)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_thyv6"]
graph_offset = Vector2(-644, 110)
nodes/output/position = Vector2(400, 280)
nodes/RightHand_SM/node = SubResource("AnimationNodeStateMachine_e7ho3")
nodes/RightHand_SM/position = Vector2(-260, 500)
nodes/LeftHand_SM/node = SubResource("AnimationNodeStateMachine_lxvi3")
nodes/LeftHand_SM/position = Vector2(-540, 420)
nodes/Base_Movement/node = SubResource("AnimationNodeStateMachine_788iy")
nodes/Base_Movement/position = Vector2(-540, 220)
nodes/Blend_LeftHand/node = SubResource("AnimationNodeBlend2_yfcuc")
nodes/Blend_LeftHand/position = Vector2(-260, 220)
nodes/Blend_RightHand/node = SubResource("AnimationNodeBlend2_svflv")
nodes/Blend_RightHand/position = Vector2(0, 220)
node_connections = [&"output", 0, &"Blend_RightHand", &"Blend_LeftHand", 0, &"Base_Movement", &"Blend_LeftHand", 1, &"LeftHand_SM", &"Blend_RightHand", 0, &"Blend_LeftHand", &"Blend_RightHand", 1, &"RightHand_SM"]

[node name="viewmodel_camera" type="Camera3D"]
fov = 65.0
script = ExtResource("1_yv3jn")
mantle_animation_curve = ExtResource("2_monst")

[node name="PLA" parent="." instance=ExtResource("3_thyv6")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, -0.335, 0.12)

[node name="Skeleton3D" parent="PLA/rig" index="0"]
bones/1/rotation = Quaternion(0.2677517, 0.5103684, 0.7945995, 0.19090545)
bones/1/scale = Vector3(1.0013132, 0.99737996, 1.001313)
bones/2/rotation = Quaternion(3.783842e-08, 0.197382, 1.6152457e-07, 0.9803267)
bones/3/rotation = Quaternion(0.2842247, 0.19689533, -0.059677303, 0.9364225)
bones/3/scale = Vector3(1.000199, 0.9983662, 1.001444)
bones/4/rotation = Quaternion(2.6791087e-08, 0.032841112, 2.7744397e-07, 0.99946064)
bones/5/rotation = Quaternion(0.13029875, 0.033229686, -0.16466346, 0.9771407)
bones/5/scale = Vector3(0.9989383, 1.0022672, 0.9988068)
bones/6/rotation = Quaternion(0.1511403, 0.8220849, -0.35683954, 0.41713145)
bones/7/rotation = Quaternion(0.36922342, 0.00015379259, 0.00302891, 0.9293357)
bones/8/rotation = Quaternion(0.27814382, -0.0012505052, -0.005661357, 0.96052206)
bones/9/rotation = Quaternion(0.20329036, 0.9700393, 0.123325974, -0.049873784)
bones/10/rotation = Quaternion(0.31549436, 0.0034731834, -0.0045487033, 0.94891024)
bones/11/rotation = Quaternion(0.20283067, 0.0013811223, 0.00633003, 0.97919244)
bones/13/rotation = Quaternion(0.1867896, 0.8525688, -0.33211416, 0.35768175)
bones/14/rotation = Quaternion(0.28634334, -0.025268855, -0.0026327434, 0.95779026)
bones/15/rotation = Quaternion(0.30330247, 0.0040178546, 0.018210134, 0.9527119)
bones/17/rotation = Quaternion(0.21634014, 0.75480443, -0.452147, 0.42311972)
bones/18/rotation = Quaternion(0.60698295, 0.009046297, 0.024702188, 0.79427934)
bones/19/rotation = Quaternion(0.53375393, -0.027227284, -0.050225448, 0.84370786)
bones/21/rotation = Quaternion(0.25651148, 0.62672186, -0.52587056, 0.5146667)
bones/22/rotation = Quaternion(0.57997715, -0.012630332, -0.035661947, 0.8137538)
bones/23/rotation = Quaternion(0.51744145, 0.02979981, 0.055505168, 0.8533965)
bones/26/rotation = Quaternion(-0.30017462, 0.47884136, 0.8064148, -0.17407325)
bones/26/scale = Vector3(1.0031704, 0.99368966, 1.0031701)
bones/27/rotation = Quaternion(1.06014234e-07, -0.20234868, -1.1008268e-07, 0.97931355)
bones/28/rotation = Quaternion(0.34278628, -0.20174132, 0.075495936, 0.9143841)
bones/28/scale = Vector3(1.000486, 0.9949759, 1.0046053)
bones/29/rotation = Quaternion(2.4957435e-08, -0.06131991, -3.6764484e-07, 0.9981183)
bones/30/rotation = Quaternion(0.06950533, -0.061557148, 0.061929643, 0.9937527)
bones/30/scale = Vector3(0.9965185, 1.0069271, 0.9965975)
bones/31/rotation = Quaternion(-0.16108803, 0.8435271, -0.27132368, -0.43462187)
bones/32/rotation = Quaternion(0.2998396, -0.0840169, 0.023494199, 0.94999236)
bones/33/rotation = Quaternion(0.20763853, 0.0008362658, 0.0057381587, 0.9781885)
bones/35/rotation = Quaternion(0.2211346, 3.6175144e-05, 0.0032941715, 0.9752377)
bones/36/rotation = Quaternion(0.10605463, -0.00075511297, -0.006434601, 0.9943392)
bones/37/rotation = Quaternion(-0.06418837, 0.97869974, 0.0557401, -0.18686827)
bones/38/rotation = Quaternion(-0.12840334, 0.88435036, -0.25985315, -0.36594182)
bones/39/rotation = Quaternion(0.33140138, 0.048749693, -0.006790209, 0.94220513)
bones/40/rotation = Quaternion(0.34816784, -0.0048774243, -0.01799929, 0.9372468)
bones/41/rotation = Quaternion(-0.020364642, 0.98536414, 0.015337143, -0.16854608)
bones/45/rotation = Quaternion(0.043773152, 0.98764414, -0.023957413, -0.14855665)
bones/48/rotation = Quaternion(0.06505004, -0.0008127417, -0.06299229, 0.9958915)
bones/49/rotation = Quaternion(0.039399967, 0.98918235, -0.080620274, -0.11604516)

[node name="HANDS" parent="PLA/rig/Skeleton3D" index="0"]
layers = 2
surface_material_override/0 = SubResource("ShaderMaterial_k80qd")

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="PLA/rig/Skeleton3D" index="1"]
transform = Transform3D(-0.9909547, -0.10349928, -0.10150206, -0.117666975, 0.16733322, 0.9809035, -0.08479455, 0.97735715, -0.17497349, 0.4527263, -0.054744013, 0.38396868)
bone_name = "DEF-forearm.L"
bone_idx = 3

[node name="HookOrigin" type="Marker3D" parent="PLA/rig/Skeleton3D/BoneAttachment3D"]
transform = Transform3D(0.9995366, 0, 0, 0, 1.0010792, 0, 0, 0, 0.99938244, 0, 0, 0)

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="PLA/rig/Skeleton3D" index="2"]
transform = Transform3D(0.9597341, 0.28349707, 0.0090442, -0.08394095, 0.32183036, -0.9458341, -0.26662797, 0.90505326, 0.3213638, -0.4153944, 0.045075465, 0.8556311)
bone_name = "DEF-palm.02.R"
bone_idx = 41

[node name="MagicOrigin" type="Marker3D" parent="PLA/rig/Skeleton3D/BoneAttachment3D2"]
transform = Transform3D(1, 0, 0, 0, -0.98628557, -0.1650477, 0, 0.1650477, -0.98628557, 0, 0, 0)

[node name="AnimationTree" type="AnimationTree" parent="PLA"]
tree_root = SubResource("AnimationNodeBlendTree_thyv6")
anim_player = NodePath("../AnimationPlayer")
parameters/Blend_LeftHand/blend_amount = 1.0
parameters/Blend_RightHand/blend_amount = 1.0

[editable path="PLA"]
