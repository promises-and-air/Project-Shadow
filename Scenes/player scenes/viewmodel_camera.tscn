[gd_scene load_steps=40 format=3 uid="uid://crm0oehiwfse0"]

[ext_resource type="Script" uid="uid://caths748dbcbb" path="res://Scripts/PlayerCharacter/QuakelikeController/viewmodel.gd" id="1_yv3jn"]
[ext_resource type="Curve" uid="uid://vahpdtrhcd6d" path="res://Scripts/PlayerCharacter/QuakelikeController/grappleCurve.tres" id="2_monst"]
[ext_resource type="PackedScene" uid="uid://bytpsgy5tks2o" path="res://assets/arm_rig/ArmRig.glb" id="3_thyv6"]
[ext_resource type="Shader" uid="uid://da660fif3n7uf" path="res://assets/arm_rig/my_toon_shader.gdshader" id="4_788iy"]
[ext_resource type="Texture2D" uid="uid://brl44lijoor0h" path="res://assets/arm_rig/ArmRig_DefaultMaterial_Base_color.png" id="5_yfcuc"]

[sub_resource type="Gradient" id="Gradient_svflv"]
offsets = PackedFloat32Array(0.54121864, 0.54480284)
colors = PackedColorArray(0.103743516, 0.10374353, 0.103743516, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_a75n1"]
gradient = SubResource("Gradient_svflv")

[sub_resource type="Gradient" id="Gradient_bbnd0"]
offsets = PackedFloat32Array(0.5519713, 0.72759855)
colors = PackedColorArray(0.101960786, 0.101960786, 0.101960786, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_lxvi3"]
gradient = SubResource("Gradient_bbnd0")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_k80qd"]
render_priority = 0
shader = ExtResource("4_788iy")
shader_parameter/main_texture = ExtResource("5_yfcuc")
shader_parameter/color_gradient = SubResource("GradientTexture1D_a75n1")
shader_parameter/fresnel_gradient = SubResource("GradientTexture1D_lxvi3")

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_thyv6"]
animation = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qqqq8"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_788iy"]
states/idle/node = SubResource("AnimationNodeAnimation_thyv6")
states/idle/position = Vector2(320, 100)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_qqqq8")]
graph_offset = Vector2(-106, -8)

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_yfcuc"]
filter_enabled = true
filters = ["rig/Skeleton3D:DEF-f_index.01.L", "rig/Skeleton3D:DEF-f_index.02.L", "rig/Skeleton3D:DEF-f_index.03.L", "rig/Skeleton3D:DEF-f_middle.01.L", "rig/Skeleton3D:DEF-f_middle.02.L", "rig/Skeleton3D:DEF-f_middle.03.L", "rig/Skeleton3D:DEF-f_pinky.01.L", "rig/Skeleton3D:DEF-f_pinky.02.L", "rig/Skeleton3D:DEF-f_pinky.03.L", "rig/Skeleton3D:DEF-f_ring.01.L", "rig/Skeleton3D:DEF-f_ring.02.L", "rig/Skeleton3D:DEF-f_ring.03.L", "rig/Skeleton3D:DEF-forearm.L", "rig/Skeleton3D:DEF-forearm.L.001", "rig/Skeleton3D:DEF-hand.L", "rig/Skeleton3D:DEF-thumb.01.L", "rig/Skeleton3D:DEF-thumb.02.L", "rig/Skeleton3D:DEF-thumb.03.L", "rig/Skeleton3D:DEF-upper_arm.L", "rig/Skeleton3D:DEF-upper_arm.L.001"]

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_svflv"]
filter_enabled = true
filters = ["rig/Skeleton3D:DEF-f_index.01.R", "rig/Skeleton3D:DEF-f_index.02.R", "rig/Skeleton3D:DEF-f_index.03.R", "rig/Skeleton3D:DEF-f_middle.01.R", "rig/Skeleton3D:DEF-f_middle.02.R", "rig/Skeleton3D:DEF-f_middle.03.R", "rig/Skeleton3D:DEF-f_pinky.01.R", "rig/Skeleton3D:DEF-f_pinky.02.R", "rig/Skeleton3D:DEF-f_pinky.03.R", "rig/Skeleton3D:DEF-f_ring.01.R", "rig/Skeleton3D:DEF-f_ring.02.R", "rig/Skeleton3D:DEF-f_ring.03.R", "rig/Skeleton3D:DEF-forearm.R", "rig/Skeleton3D:DEF-forearm.R.001", "rig/Skeleton3D:DEF-hand.R", "rig/Skeleton3D:DEF-palm.01.R", "rig/Skeleton3D:DEF-palm.02.R", "rig/Skeleton3D:DEF-palm.03.R", "rig/Skeleton3D:DEF-palm.04.R", "rig/Skeleton3D:DEF-thumb.01.R", "rig/Skeleton3D:DEF-thumb.02.R", "rig/Skeleton3D:DEF-thumb.03.R", "rig/Skeleton3D:DEF-upper_arm.R", "rig/Skeleton3D:DEF-upper_arm.R.001"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a75n1"]
animation = &"dash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_svflv"]
animation = &"hook_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_788iy"]
animation = &"hook_release"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yfcuc"]
animation = &"hook_throw"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qqqq8"]
animation = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_788iy"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_a75n1"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bbnd0"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_svflv"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_iwujp"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lxvi3"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_bnju3"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_lxvi3"]
states/dash/node = SubResource("AnimationNodeAnimation_a75n1")
states/dash/position = Vector2(443, 179)
states/hook_idle/node = SubResource("AnimationNodeAnimation_svflv")
states/hook_idle/position = Vector2(511, -13)
states/hook_release/node = SubResource("AnimationNodeAnimation_788iy")
states/hook_release/position = Vector2(443, 54)
states/hook_throw/node = SubResource("AnimationNodeAnimation_yfcuc")
states/hook_throw/position = Vector2(388, -58)
states/idle/node = SubResource("AnimationNodeAnimation_qqqq8")
states/idle/position = Vector2(303, 100)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_788iy"), "idle", "dash", SubResource("AnimationNodeStateMachineTransition_a75n1"), "dash", "idle", SubResource("AnimationNodeStateMachineTransition_bbnd0"), "idle", "hook_throw", SubResource("AnimationNodeStateMachineTransition_svflv"), "hook_release", "idle", SubResource("AnimationNodeStateMachineTransition_iwujp"), "hook_throw", "hook_idle", SubResource("AnimationNodeStateMachineTransition_lxvi3"), "hook_idle", "hook_release", SubResource("AnimationNodeStateMachineTransition_bnju3")]
graph_offset = Vector2(-215, -100)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bbnd0"]
animation = &"fire_hold"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_k80qd"]
animation = &"fire_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_e7ho3"]
animation = &"fire_release"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lxvi3"]
animation = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_k80qd"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ir7kh"]
xfade_time = 0.3
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kj8uk"]
xfade_time = 0.3
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5fm3q"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8vgjs"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_e7ho3"]
states/fire_hold/node = SubResource("AnimationNodeAnimation_bbnd0")
states/fire_hold/position = Vector2(472, 8)
states/fire_idle/node = SubResource("AnimationNodeAnimation_k80qd")
states/fire_idle/position = Vector2(472, 92)
states/fire_release/node = SubResource("AnimationNodeAnimation_e7ho3")
states/fire_release/position = Vector2(472, 160)
states/idle/node = SubResource("AnimationNodeAnimation_lxvi3")
states/idle/position = Vector2(295, 100)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_k80qd"), "idle", "fire_hold", SubResource("AnimationNodeStateMachineTransition_ir7kh"), "fire_hold", "fire_idle", SubResource("AnimationNodeStateMachineTransition_kj8uk"), "fire_idle", "fire_release", SubResource("AnimationNodeStateMachineTransition_5fm3q"), "fire_release", "idle", SubResource("AnimationNodeStateMachineTransition_8vgjs")]
graph_offset = Vector2(-104, -26)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_thyv6"]
graph_offset = Vector2(-609.42737, 145.74556)
nodes/output/position = Vector2(400, 280)
nodes/RightHand_SM/node = SubResource("AnimationNodeStateMachine_e7ho3")
nodes/RightHand_SM/position = Vector2(-260, 500)
nodes/LeftHand_SM/node = SubResource("AnimationNodeStateMachine_lxvi3")
nodes/LeftHand_SM/position = Vector2(-540, 420)
nodes/Base_Movement/node = SubResource("AnimationNodeStateMachine_788iy")
nodes/Base_Movement/position = Vector2(-540, 220)
nodes/Blend_LeftHand/node = SubResource("AnimationNodeBlend2_yfcuc")
nodes/Blend_LeftHand/position = Vector2(-260, 220)
nodes/Blend_RightHand/node = SubResource("AnimationNodeBlend2_svflv")
nodes/Blend_RightHand/position = Vector2(0, 220)
node_connections = [&"output", 0, &"Blend_RightHand", &"Blend_LeftHand", 0, &"Base_Movement", &"Blend_LeftHand", 1, &"LeftHand_SM", &"Blend_RightHand", 0, &"Blend_LeftHand", &"Blend_RightHand", 1, &"RightHand_SM"]

[node name="viewmodel_camera" type="Camera3D"]
fov = 65.0
script = ExtResource("1_yv3jn")
mantle_animation_curve = ExtResource("2_monst")

[node name="PLA" parent="." instance=ExtResource("3_thyv6")]
transform = Transform3D(-1, 0, 8.742278e-08, 0, 1, 0, -8.742278e-08, 0, -1, 0, -0.335, 0.12)

[node name="Skeleton3D" parent="PLA/rig" index="0"]
bones/1/position = Vector3(0.46950924, 0.17185019, -0.12556195)
bones/1/rotation = Quaternion(0.27222028, 0.50116503, 0.797694, 0.19599512)
bones/1/scale = Vector3(1.0006506, 0.9987002, 1.0006506)
bones/2/rotation = Quaternion(5.0515574e-08, 0.20182826, 2.384804e-08, 0.979421)
bones/3/rotation = Quaternion(0.26852265, 0.20183598, -0.05762242, 0.94012636)
bones/3/scale = Vector3(1.0002066, 0.99896103, 1.0008342)
bones/4/rotation = Quaternion(-2.7311058e-08, 0.02995262, -4.1240616e-10, 0.99955136)
bones/5/rotation = Quaternion(0.13165757, 0.030191228, -0.111502215, 0.9845416)
bones/5/scale = Vector3(0.99925405, 1.0014956, 0.99925405)
bones/6/rotation = Quaternion(0.13140495, 0.8379202, -0.31788018, 0.42376268)
bones/7/rotation = Quaternion(0.47235954, 0.0004966174, 0.0029924563, 0.8814008)
bones/8/rotation = Quaternion(0.3854095, -0.0018852787, -0.0054837503, 0.92272747)
bones/9/rotation = Quaternion(0.23243745, 0.9649776, 0.10764199, -0.056607395)
bones/10/rotation = Quaternion(0.23814332, 0.0007729039, -0.0035057624, 0.9712234)
bones/11/rotation = Quaternion(0.123396546, 0.00086736004, 0.0064206165, 0.9923364)
bones/13/rotation = Quaternion(0.16681015, 0.8561958, -0.33743113, 0.3538976)
bones/14/rotation = Quaternion(0.3975408, -0.007446284, -0.0074088927, 0.91752434)
bones/15/rotation = Quaternion(0.41377488, 0.00614191, 0.017607965, 0.91018826)
bones/17/rotation = Quaternion(0.18773633, 0.78318983, -0.4009744, 0.43656424)
bones/18/rotation = Quaternion(0.5644235, 0.0077365735, 0.0251431, 0.8250662)
bones/19/rotation = Quaternion(0.48869845, -0.024551027, -0.051586516, 0.8705802)
bones/21/rotation = Quaternion(0.23316236, 0.6496843, -0.4972228, 0.5256569)
bones/22/rotation = Quaternion(0.5488753, -0.011276548, -0.036112852, 0.8350477)
bones/23/rotation = Quaternion(0.4848872, 0.027685484, 0.05658959, 0.8723048)
bones/26/position = Vector3(-0.46950924, 0.1718502, -0.12556195)
bones/26/rotation = Quaternion(-0.32286614, 0.44390404, 0.81656563, -0.17868245)
bones/26/scale = Vector3(1.0024755, 0.9950674, 1.0024755)
bones/27/rotation = Quaternion(-1.8505466e-08, -0.21200784, -8.896776e-09, 0.977268)
bones/28/rotation = Quaternion(0.40986553, -0.21165058, 0.098379046, 0.8817799)
bones/28/scale = Vector3(1.0007913, 0.99412996, 1.0051364)
bones/29/rotation = Quaternion(-1.15013e-08, -0.08846956, -6.6925536e-09, 0.9960789)
bones/30/rotation = Quaternion(-0.016618429, -0.08871803, 0.077093266, 0.99292976)
bones/30/scale = Vector3(0.9969929, 1.0062661, 0.9967756)
bones/31/rotation = Quaternion(-0.16174741, 0.8428328, -0.2736629, -0.4342572)
bones/32/rotation = Quaternion(0.37643465, -0.08198828, 0.030348789, 0.92230904)
bones/33/rotation = Quaternion(0.28684932, 0.0013021405, 0.005650582, 0.9579582)
bones/34/rotation = Quaternion(-0.24068034, 0.9633279, 0.10319979, 0.05850008)
bones/35/rotation = Quaternion(0.23124322, 7.014037e-05, 0.0032937936, 0.9728905)
bones/36/rotation = Quaternion(0.11634633, -0.0008217608, -0.0064265947, 0.99318767)
bones/37/rotation = Quaternion(-0.06418835, 0.97869974, 0.055740096, -0.1868683)
bones/38/rotation = Quaternion(-0.114848696, 0.8919704, -0.23464803, -0.36897022)
bones/39/rotation = Quaternion(0.41814405, 0.047736607, -0.011248106, 0.9070559)
bones/40/rotation = Quaternion(0.43437147, -0.0065408777, -0.017463485, 0.90054077)
bones/41/rotation = Quaternion(-0.020364672, 0.98536414, 0.015337134, -0.16854608)
bones/42/rotation = Quaternion(-0.1619503, 0.8057944, -0.35269552, -0.44729573)
bones/43/rotation = Quaternion(0.46160522, 0.053381316, -0.056301016, 0.88368624)
bones/44/rotation = Quaternion(0.3837872, 0.018364202, 0.05409907, 0.9216525)
bones/45/rotation = Quaternion(0.043773115, 0.98764414, -0.023957398, -0.14855665)
bones/46/rotation = Quaternion(0.14072305, -0.72454, 0.37994975, 0.5575634)
bones/47/rotation = Quaternion(0.46300274, 0.0076250923, 0.03705577, 0.88554907)
bones/48/rotation = Quaternion(0.39562303, -0.021913666, -0.05906487, 0.9162498)
bones/49/rotation = Quaternion(0.039399978, 0.98918235, -0.08062027, -0.116045184)

[node name="HANDS" parent="PLA/rig/Skeleton3D" index="0"]
layers = 2
surface_material_override/0 = SubResource("ShaderMaterial_k80qd")

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="PLA/rig/Skeleton3D" index="1"]
transform = Transform3D(0.8989659, -0.40606138, -0.1666758, -0.020257175, 0.34263375, -0.93987507, 0.43693686, 0.8478098, 0.29722452, 0.3683249, 0.03887803, 0.8781569)
bone_name = "DEF-palm.02.L"
bone_idx = 16

[node name="HookOrigin" type="Marker3D" parent="PLA/rig/Skeleton3D/BoneAttachment3D"]

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="PLA/rig/Skeleton3D" index="2"]
transform = Transform3D(0.95138955, 0.2899109, -0.110559374, -0.17630354, 0.21531644, -0.9622156, -0.25224096, 0.9322364, 0.2504016, -0.39305958, 0.033894006, 0.8304599)
bone_name = "DEF-palm.02.R"
bone_idx = 41

[node name="MagicOrigin" type="Marker3D" parent="PLA/rig/Skeleton3D/BoneAttachment3D2"]
transform = Transform3D(1, 0, 0, 0, -0.98628557, -0.1650477, 0, 0.1650477, -0.98628557, 0, 0, 0)

[node name="AnimationTree" type="AnimationTree" parent="PLA"]
tree_root = SubResource("AnimationNodeBlendTree_thyv6")
anim_player = NodePath("../AnimationPlayer")
parameters/Blend_LeftHand/blend_amount = 1.0
parameters/Blend_RightHand/blend_amount = 1.0

[editable path="PLA"]
